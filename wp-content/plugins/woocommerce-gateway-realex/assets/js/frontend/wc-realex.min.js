jQuery(document).ready(function(a){"use strict";function b(){-1!==realex_params.card_types.indexOf("SWITCH")&&a(".payment_method_realex #realex_cardType").change(function(){var b=jQuery(this),c=a(".payment_method_realex #realex_issueNumber");"SWITCH"===b.val()&&b.val().substring(0,6)?c.parent().slideDown():c.parent().is(":visible")&&c.parent().slideUp()}),realex_params.vault_available&&(a('input[name="realex_card_ref"]').change(function(b){var c=a(b.target).attr("id");"realex_new"===c?a(".realex_vault_new").slideDown():a(".realex_vault_new").is(":visible")&&a(".realex_vault_new").slideUp()}),"yes"===wc_checkout_params.option_guest_checkout&&a("input#createaccount").change(function(){a("div.realex_create-account").hide(),a(this).is(":checked")&&a("div.realex_create-account").slideDown()}).change())}var c;a("body").bind("updated_checkout",function(){b()}),a("form.pay-page-checkout").length&&b(),a("form.pay-page-checkout").submit(function(){clearTimeout(c);var b=a(this);if(b.is(".processing"))return!1;b.addClass("processing");var d=b.data();1!==d["blockUI.isBlocked"]&&b.block({message:null,overlayCSS:{background:"#fff url("+realex_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}});var e=b.serialize();return a.ajax({type:"POST",url:realex_params.checkout_url,order_id:realex_params.order_id,data:e,success:function(c){var d="";try{if(c.indexOf("<!--WC_START-->")>=0&&(c=c.split("<!--WC_START-->")[1]),c.indexOf("<!--WC_END-->")>=0&&(c=c.split("<!--WC_END-->")[0]),d=a.parseJSON(c),"success"!==d.result)throw"failure"===d.result?"Result failure":"Invalid response";window.location=decodeURI(d.redirect)}catch(e){a(".woocommerce-error, .woocommerce-message").remove(),"undefined"!=typeof d.messages?b.prepend(d.messages):b.prepend(c),b.removeClass("processing").unblock(),b.find(".input-text, select").blur(),a("html, body").animate({scrollTop:a("form.pay-page-checkout").offset().top-100},1e3)}},dataType:"html"}),!1})});